name: Docker Image VKPR

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

jobs:

  build:

    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v3
    - name: Build the Docker image
      run: docker build . --file Dockerfile --tag docker.vertigo-devops.com/vkpr-teste:$(date +%s)  
    - name: Image list
      run: docker image ls              
      
# Show how to print unmasked GitHub secrets to the console
    - name: Step 1 - Echo out a GitHub Actions Secret to the logs
      run: |
          echo "The GitHub Action Secret will be masked:  "
          echo ${{ secrets.NEXUS_LOGIN_KEY }}
          echo "Trick to echo GitHub Actions Secret:  "
          echo ${{secrets.NEXUS_PASSWORD_KEY}} | sed 's/./& /g' 
